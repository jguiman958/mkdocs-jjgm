
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../men%C3%BAprincipal/">
      
      
        <link rel="next" href="../bitnamiprestashop/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.10">
    
    
      
        <title>Terraform - Sitio web de jguiman958.</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.7e359304.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Anta:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Anta";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#practica_11-construccion-de-instancias-de-una-arquitectura-en-3-niveles" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Sitio web de jguiman958." class="md-header__button md-logo" aria-label="Sitio web de jguiman958." data-md-component="logo">
      
  <img src="../assets/logoIAW.jpg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Sitio web de jguiman958.
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Terraform
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Sitio web de jguiman958." class="md-nav__button md-logo" aria-label="Sitio web de jguiman958." data-md-component="logo">
      
  <img src="../assets/logoIAW.jpg" alt="logo">

    </a>
    Sitio web de jguiman958.
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../men%C3%BAprincipal/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Principal
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Terraform
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Terraform
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#que-necesitamos" class="md-nav__link">
    <span class="md-ellipsis">
      ¿Qué necesitamos?
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fichero-maintf" class="md-nav__link">
    <span class="md-ellipsis">
      Fichero main.tf
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Fichero main.tf">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#en-este-apartado-tenemos-que-crear-al-proveedor-en-este-caso-es-aws-donde-queremos-crear-las-instancias" class="md-nav__link">
    <span class="md-ellipsis">
      En este apartado tenemos que crear al proveedor en este caso es aws, donde queremos crear las instancias...
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ahora-vamos-con-los-grupos-de-seguridad-es-necesario-uno-para-cada-instancia" class="md-nav__link">
    <span class="md-ellipsis">
      Ahora vamos con los grupos de seguridad, es necesario uno para cada instancia.
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creacion-de-las-instancias" class="md-nav__link">
    <span class="md-ellipsis">
      Creación de las instancias.
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#comprobaciones" class="md-nav__link">
    <span class="md-ellipsis">
      Comprobaciones.
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../bitnamiprestashop/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Prestashop con bitnami
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../about/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Acerca de
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#que-necesitamos" class="md-nav__link">
    <span class="md-ellipsis">
      ¿Qué necesitamos?
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fichero-maintf" class="md-nav__link">
    <span class="md-ellipsis">
      Fichero main.tf
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Fichero main.tf">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#en-este-apartado-tenemos-que-crear-al-proveedor-en-este-caso-es-aws-donde-queremos-crear-las-instancias" class="md-nav__link">
    <span class="md-ellipsis">
      En este apartado tenemos que crear al proveedor en este caso es aws, donde queremos crear las instancias...
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ahora-vamos-con-los-grupos-de-seguridad-es-necesario-uno-para-cada-instancia" class="md-nav__link">
    <span class="md-ellipsis">
      Ahora vamos con los grupos de seguridad, es necesario uno para cada instancia.
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creacion-de-las-instancias" class="md-nav__link">
    <span class="md-ellipsis">
      Creación de las instancias.
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#comprobaciones" class="md-nav__link">
    <span class="md-ellipsis">
      Comprobaciones.
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="practica_11-construccion-de-instancias-de-una-arquitectura-en-3-niveles">Practica_11. Construcción de instancias de una arquitectura en 3 niveles.</h1>
<h3 id="que-necesitamos">¿Qué necesitamos?</h3>
<p>Anteriormente hemos realizado la creación de instancias manualmente, ahora lo idoneo sería generar un script que nos permita crear instancias automaticamente,
pero claro, para ello primero tenemos que construir dicho script... Lo haremos con terraform, terraform nos ayuda a realizar instalaciones desatendidas en aws.</p>
<p>Las instrucciones usadas en terraform son: <code>terraform init</code>,<code>terraform fmt</code>, <code>terraform validate</code>, <code>terraform plan</code> y <code>terraform apply</code>.</p>
<p>Los cuales cada uno realiza lo siguiente:</p>
<pre><code>Terraform init --&gt; Descargamos los plugins del proveedor, en este caso el de aws.

Terraform fmt --&gt; Formatea el fichero de configuración para que sea mas legible, tareas que realiza: ajusta la indentación, ordena los argumentos de los bloques de configuración.

Terraform validate --&gt; Validamos que la sintaxis del comando es correcta.

Terraform plan --&gt; Mostramos los cambios que se van a aplicar.

Terraform apply --&gt; Y aplicamos los cambios.
</code></pre>
<p>Debe realizarse según el orden que has ido leyéndolo, de arriba para abajo puedes saltarte el validate... no te lo recomiendo.</p>
<h2 id="fichero-maintf">Fichero main.tf</h2>
<h3 id="en-este-apartado-tenemos-que-crear-al-proveedor-en-este-caso-es-aws-donde-queremos-crear-las-instancias">En este apartado tenemos que crear al proveedor en este caso es aws, donde queremos crear las instancias...</h3>
<pre><code># Configuramos el proveedor de AWS
provider &quot;aws&quot; {
  region     = &quot;us-east-1&quot;
  access_key = &quot;clave_acceso&quot; &lt;--ESTO CAMBIA SIEMPRE TENLO EN CUENTA
  secret_key = &quot;secret_token&quot; &lt;--ESTO CAMBIA SIEMPRE TENLO EN CUENTA
  token      = &quot;clave_token_aws&quot; &lt;--ESTO CAMBIA SIEMPRE TENLO EN CUENTA
}
</code></pre>
<p>Es necesario poner la región, la clave de acceso, la clave secreta y un token de autenticación.</p>
<h3 id="ahora-vamos-con-los-grupos-de-seguridad-es-necesario-uno-para-cada-instancia">Ahora vamos con los grupos de seguridad, es necesario uno para cada instancia.</h3>
<pre><code># CREACIÓN DE LOS GRUPOS DE SEGURIDAD.
# Creamos un grupo de seguridad para el frontend
resource &quot;aws_security_group&quot; &quot;sg_frontend_terraform_1&quot; {
  name        = &quot;sg_frontend_terraform_1&quot;
  description = &quot;Grupo de seguridad para la instancia de frontend1&quot;

  # Reglas de entrada para permitir el tráfico SSH, HTTP y HTTPS
  ingress {
    from_port   = 22
    to_port     = 22
    protocol    = &quot;tcp&quot;
    cidr_blocks = [&quot;0.0.0.0/0&quot;]
  }

  ingress {
    from_port   = 80
    to_port     = 80
    protocol    = &quot;tcp&quot;
    cidr_blocks = [&quot;0.0.0.0/0&quot;]
  }

  # Reglas de salida para permitir todas las conexiones salientes
  egress {
    from_port   = 0
    to_port     = 0
    protocol    = &quot;-1&quot;
    cidr_blocks = [&quot;0.0.0.0/0&quot;]
  }
}
</code></pre>
<p>Podemos ver que para asignar una regla de entrada y salida viene definido, dependiendo de si queremos conexiones entrantes o salientes, ingress, para entrantes, el cual se declara los puertos con <code>from_port, to_port,protocol, cidr_blocks</code> y egress para salientes.</p>
<pre><code>resource &quot;aws_security_group&quot; &quot;sg_frontend_terraform_2&quot; {
  name        = &quot;sg_frontend_terraform_2&quot;
  description = &quot;Grupo de seguridad para la instancia de frontend2&quot;

  # Reglas de entrada para permitir el tráfico SSH, HTTP y HTTPS
  ingress {
    from_port   = 22
    to_port     = 22
    protocol    = &quot;tcp&quot;
    cidr_blocks = [&quot;0.0.0.0/0&quot;]
  }

  ingress {
    from_port   = 80
    to_port     = 80
    protocol    = &quot;tcp&quot;
    cidr_blocks = [&quot;0.0.0.0/0&quot;]
  }

  # Reglas de salida para permitir todas las conexiones salientes
  egress {
    from_port   = 0
    to_port     = 0
    protocol    = &quot;-1&quot;
    cidr_blocks = [&quot;0.0.0.0/0&quot;]
  }
}
</code></pre>
<p>Lo mismo para este, solo que tiene los mismos por ser el frontend al igual que el anterior...</p>
<pre><code># Creamos un grupo de seguridad para el servidor nfs.
resource &quot;aws_security_group&quot; &quot;sg_nfs_terraform&quot; {
  name        = &quot;sg_nfs&quot;
  description = &quot;Grupo de seguridad para la instancia de nfs_server&quot;

  # Reglas de entrada para permitir el tráfico SSH, nfs.
  ingress {
    from_port   = 22
    to_port     = 22
    protocol    = &quot;tcp&quot;
    cidr_blocks = [&quot;0.0.0.0/0&quot;]
  }

  ingress {
    from_port   = 2049
    to_port     = 2049
    protocol    = &quot;tcp&quot;
    cidr_blocks = [&quot;0.0.0.0/0&quot;]
  }

  # Reglas de salida para permitir todas las conexiones salientes
  egress {
    from_port   = 0
    to_port     = 0
    protocol    = &quot;-1&quot;
    cidr_blocks = [&quot;0.0.0.0/0&quot;]
  }
}
</code></pre>
<p>Ya el servidor nfs requiere puertos distintos.. pero la sintaxis es la misma... Cabe destacar que la sintaxis correcta es:</p>
<p><code>resource "aws_security_group" "nombre_grupo_seguridad" {name ="" description=""}</code></p>
<p>Con seguir los ejemplos se entiende, es como si lo hicieramos desde el interfaz del navegador de aws, pero con sintaxis.</p>
<p>Estos son los grupos de seguridad para el balanceador, incluyendo el puerto 443 el cual muestra el contenido de los frontend de forma segura.</p>
<pre><code># Creamos un grupo de seguridad para el balanceador de carga.
resource &quot;aws_security_group&quot; &quot;sg_load_balancer_terraform&quot; {
  name        = &quot;sg_load_balancer_terraform&quot;
  description = &quot;Grupo de seguridad para la instancia de load_balancer&quot;

  # Reglas de entrada para permitir el tráfico SSH, HTTP y HTTPS
  ingress {
    from_port   = 22
    to_port     = 22
    protocol    = &quot;tcp&quot;
    cidr_blocks = [&quot;0.0.0.0/0&quot;]
  }

  ingress {
    from_port   = 80
    to_port     = 80
    protocol    = &quot;tcp&quot;
    cidr_blocks = [&quot;0.0.0.0/0&quot;]
  }

  ingress {
    from_port   = 443
    to_port     = 443
    protocol    = &quot;tcp&quot;
    cidr_blocks = [&quot;0.0.0.0/0&quot;]
  }

  # Reglas de salida para permitir todas las conexiones salientes
  egress {
    from_port   = 0
    to_port     = 0
    protocol    = &quot;-1&quot;
    cidr_blocks = [&quot;0.0.0.0/0&quot;]
  }
}
</code></pre>
<p>Lo mismo para el grupo de seguridad de backend... en este al final incluí que aceptase los ping (icmp).</p>
<pre><code># Grupo de seguridad para el backend
resource &quot;aws_security_group&quot; &quot;sg_backend_terraform&quot; {
  name        = &quot;sg_backend_terraform&quot;
  description = &quot;Grupo de seguridad para la instancia de backend&quot;

  # Reglas de entrada para permitir el tráfico SSH, 3306 e icmp.
  ingress {
    from_port   = 22
    to_port     = 22
    protocol    = &quot;tcp&quot;
    cidr_blocks = [&quot;0.0.0.0/0&quot;]
  }

  ingress {
    from_port   = 3306
    to_port     = 3306
    protocol    = &quot;tcp&quot;
    cidr_blocks = [&quot;0.0.0.0/0&quot;]
  }

  ingress { # Regla para ping--&gt; ICMP.
    from_port   = -1
    to_port     = -1
    protocol    = &quot;icmp&quot;
    cidr_blocks = [&quot;0.0.0.0/0&quot;]
  }

  # Reglas de salida para permitir todas las conexiones salientes
  egress {
    from_port   = 0
    to_port     = 0
    protocol    = &quot;-1&quot;
    cidr_blocks = [&quot;0.0.0.0/0&quot;]
  }
}
</code></pre>
<h2 id="creacion-de-las-instancias">Creación de las instancias.</h2>
<p>Aquí vamos a crear las instancias.</p>
<p>La estructura es muy simple, simplemente tenemos que elegir el ami de la instancia, los componentes hardware que va a tener (memoria ram, procesadores...), la clave que eso viene definido cuando creamos nuestra instancia, en mi caso es vockey, el grupo de seguridad, el cual se le debe de asignar a la instancia con la siguiente directiva: [security_groups = [aws_security_group.sg_frontend_terraform_1.name]] y finalmente la etiqueta tag, la cual da nombre a la instancia.</p>
<pre><code># CREACION DE LAS INSTANCIAS.
# Creamos una instancia EC2 para el frontend 1 y frontend 2.
resource &quot;aws_instance&quot; &quot;frontend_1_terraform&quot; {
  ami             = &quot;ami-0c7217cdde317cfec&quot;
  instance_type   = &quot;t2.small&quot;
  key_name        = &quot;vockey&quot;
  security_groups = [aws_security_group.sg_frontend_terraform_1.name]
  tags = {
    Name = &quot;frontend_1_terraform&quot;
  }
}
</code></pre>
<p>Con las demas son exactamente igual solo que con pequeñas variaciones, lo unico que se debe cambiar es la etiqueta y el nombre de la instancia.</p>
<pre><code>resource &quot;aws_instance&quot; &quot;frontend_2_terraform&quot; {
  ami             = &quot;ami-0c7217cdde317cfec&quot;
  instance_type   = &quot;t2.small&quot;
  key_name        = &quot;vockey&quot;
  security_groups = [aws_security_group.sg_frontend_terraform_2.name]
  tags = {
    Name = &quot;frontend_2_terraform&quot;
  }
}
</code></pre>
<pre><code># Creamos una instancia EC2 para el servidor nfs.
resource &quot;aws_instance&quot; &quot;nfs_server&quot; {
  ami             = &quot;ami-0c7217cdde317cfec&quot;
  instance_type   = &quot;t2.small&quot;
  key_name        = &quot;vockey&quot;
  security_groups = [aws_security_group.sg_nfs_terraform.name]
  tags = {
    Name = &quot;nfs_server&quot;
  }
}
</code></pre>
<pre><code># Creamos una instancia EC2 para el balanceador de carga.
resource &quot;aws_instance&quot; &quot;load_balancer&quot; {
  ami             = &quot;ami-0c7217cdde317cfec&quot;
  instance_type   = &quot;t2.small&quot;
  key_name        = &quot;vockey&quot;
  security_groups = [aws_security_group.sg_load_balancer_terraform.name]
  tags = {
    Name = &quot;load_balancer&quot;
  }
}
</code></pre>
<pre><code># Creamos una instancia EC2 para el backend.
resource &quot;aws_instance&quot; &quot;backend&quot; {
  ami             = &quot;ami-0c7217cdde317cfec&quot;
  instance_type   = &quot;t2.small&quot;
  key_name        = &quot;vockey&quot;
  security_groups = [aws_security_group.sg_backend_terraform.name]
  tags = {
    Name = &quot;backend&quot;
  }
}
</code></pre>
<p>Si queremos comprobar que funciona, solo tenemos que irnos al panel de las instancias creadas de aws y comprobar que se ha iniciado.</p>
<h2 id="comprobaciones">Comprobaciones.</h2>
<p>En esta imagen vemos que me ha creado todas esas instancias a la vez, exluyendo la del nodo principal e instancia1 y instancia2.</p>
<p><img alt="instancias_terraform" src="https://github.com/jguiman958/practica_11_terraform/assets/145347496/fe019bd3-81e2-4f2c-97c6-b9e049117385" /></p>
<p>Y aquí lo tenemos, esto nos enseña a ver una forma cómoda de crear instancias, de forma muy sencilla.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../men%C3%BAprincipal/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Principal">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Principal
              </div>
            </div>
          </a>
        
        
          
          <a href="../bitnamiprestashop/" class="md-footer__link md-footer__link--next" aria-label="Next: Prestashop con bitnami">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Prestashop con bitnami
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.footer"], "search": "../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.8fd75fb4.min.js"></script>
      
    
  </body>
</html>